{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = (a0, a1) => ({\n  \"positivo\": a0,\n  \"negativo\": a1\n});\nfunction ReportesGlobalesComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"p\");\n    i0.ɵɵtext(2, \"Cargando reportes...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReportesGlobalesComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15)(2, \"div\", 16);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCB8\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 17)(5, \"h3\");\n    i0.ɵɵtext(6, \"Total Gastos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 18);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"number\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"div\", 19)(11, \"div\", 16);\n    i0.ɵɵtext(12, \"\\uD83D\\uDCB0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 17)(14, \"h3\");\n    i0.ɵɵtext(15, \"Total Dep\\u00F3sitos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 18);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"number\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"div\", 20)(20, \"div\", 16);\n    i0.ɵɵtext(21, \"\\uD83D\\uDCCA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 17)(23, \"h3\");\n    i0.ɵɵtext(24, \"Balance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"p\", 18);\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"number\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"div\", 21)(29, \"div\", 16);\n    i0.ɵɵtext(30, \"\\uD83D\\uDCCB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 17)(32, \"h3\");\n    i0.ɵɵtext(33, \"Transacciones\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"p\", 18);\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(9, 5, ctx_r0.resumen.totalGastos, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(18, 8, ctx_r0.resumen.totalDepositos, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c0, ctx_r0.resumen.balance >= 0, ctx_r0.resumen.balance < 0));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(27, 11, ctx_r0.resumen.balance, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r0.resumen.cantidadTransacciones);\n  }\n}\nfunction ReportesGlobalesComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"h3\");\n    i0.ɵɵtext(3, \"\\uD83D\\uDCDD Nota\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \" Esta es la vista de administrador que muestra datos globales de \");\n    i0.ɵɵelementStart(6, \"strong\");\n    i0.ɵɵtext(7, \"todos los usuarios\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" del sistema. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10, \" Los usuarios normales solo pueden ver sus propios datos en su dashboard personal. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 23)(12, \"h3\");\n    i0.ɵɵtext(13, \"\\uD83D\\uDD27 Implementaci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\");\n    i0.ɵɵtext(15, \" Para completar este componente, conecta con el servicio de reportes del backend: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"ul\")(17, \"li\");\n    i0.ɵɵtext(18, \"GET /api/Reporte/movimientos?fechaInicio=...&fechaFin=...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"li\");\n    i0.ɵɵtext(20, \"GET /api/Reporte/comparativo-presupuesto?fechaInicio=...&fechaFin=...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"p\");\n    i0.ɵɵtext(22, \" El backend ya est\\u00E1 configurado para devolver datos de todos los usuarios cuando el usuario tiene rol Admin. \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let ReportesGlobalesComponent = /*#__PURE__*/(() => {\n  class ReportesGlobalesComponent {\n    constructor(authService) {\n      this.authService = authService;\n      this.fechaInicio = '';\n      this.fechaFin = '';\n      this.cargando = false;\n      // Datos de ejemplo - Aquí conectarías con tu servicio de reportes\n      this.resumen = {\n        totalGastos: 0,\n        totalDepositos: 0,\n        balance: 0,\n        cantidadTransacciones: 0\n      };\n    }\n    ngOnInit() {\n      // Establecer fechas por defecto (mes actual)\n      const hoy = new Date();\n      const primerDia = new Date(hoy.getFullYear(), hoy.getMonth(), 1);\n      this.fechaInicio = this.formatearFecha(primerDia);\n      this.fechaFin = this.formatearFecha(hoy);\n      this.cargarReportes();\n    }\n    formatearFecha(fecha) {\n      return fecha.toISOString().split('T')[0];\n    }\n    cargarReportes() {\n      this.cargando = true;\n      // TODO: Implementar llamada al servicio de reportes\n      // this.reporteService.getReportesGlobales(this.fechaInicio, this.fechaFin).subscribe({\n      //   next: (data) => {\n      //     this.resumen = data;\n      //     this.cargando = false;\n      //   },\n      //   error: (err) => {\n      //     console.error('Error:', err);\n      //     this.cargando = false;\n      //   }\n      // });\n      // Simulación de carga\n      setTimeout(() => {\n        this.resumen = {\n          totalGastos: 15000,\n          totalDepositos: 20000,\n          balance: 5000,\n          cantidadTransacciones: 45\n        };\n        this.cargando = false;\n      }, 500);\n    }\n    aplicarFiltros() {\n      if (!this.fechaInicio || !this.fechaFin) {\n        alert('Por favor selecciona ambas fechas');\n        return;\n      }\n      if (new Date(this.fechaFin) < new Date(this.fechaInicio)) {\n        alert('La fecha fin debe ser mayor o igual a la fecha inicio');\n        return;\n      }\n      this.cargarReportes();\n    }\n    static {\n      this.ɵfac = function ReportesGlobalesComponent_Factory(t) {\n        return new (t || ReportesGlobalesComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReportesGlobalesComponent,\n        selectors: [[\"app-reportes-globales\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 22,\n        vars: 5,\n        consts: [[1, \"reportes-container\"], [1, \"subtitle\"], [1, \"filtros-container\"], [1, \"filtros\"], [1, \"filtro-grupo\"], [\"for\", \"fechaInicio\"], [\"type\", \"date\", \"id\", \"fechaInicio\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"fechaFin\"], [\"type\", \"date\", \"id\", \"fechaFin\", 3, \"ngModelChange\", \"ngModel\"], [1, \"btn-primary\", 3, \"click\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"resumen-container\", 4, \"ngIf\"], [\"class\", \"info-container\", 4, \"ngIf\"], [1, \"loading\"], [1, \"resumen-container\"], [1, \"resumen-card\", \"gastos\"], [1, \"icon\"], [1, \"info\"], [1, \"amount\"], [1, \"resumen-card\", \"depositos\"], [1, \"resumen-card\", \"balance\", 3, \"ngClass\"], [1, \"resumen-card\", \"transacciones\"], [1, \"info-container\"], [1, \"info-card\"]],\n        template: function ReportesGlobalesComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Reportes Globales\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"p\", 1);\n            i0.ɵɵtext(4, \"Vista de todos los usuarios del sistema\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 2)(6, \"h2\");\n            i0.ɵɵtext(7, \"Per\\u00EDodo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 3)(9, \"div\", 4)(10, \"label\", 5);\n            i0.ɵɵtext(11, \"Fecha Inicio:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ReportesGlobalesComponent_Template_input_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.fechaInicio, $event) || (ctx.fechaInicio = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 7);\n            i0.ɵɵtext(15, \"Fecha Fin:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ReportesGlobalesComponent_Template_input_ngModelChange_16_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.fechaFin, $event) || (ctx.fechaFin = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function ReportesGlobalesComponent_Template_button_click_17_listener() {\n              return ctx.aplicarFiltros();\n            });\n            i0.ɵɵtext(18, \" Aplicar Filtros \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(19, ReportesGlobalesComponent_div_19_Template, 3, 0, \"div\", 10)(20, ReportesGlobalesComponent_div_20_Template, 36, 17, \"div\", 11)(21, ReportesGlobalesComponent_div_21_Template, 23, 0, \"div\", 12);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(12);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.fechaInicio);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.fechaFin);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.cargando);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.cargando);\n          }\n        },\n        dependencies: [CommonModule, i2.NgClass, i2.NgIf, i2.DecimalPipe, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\".reportes-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:10px;font-size:28px}.subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;font-size:16px}h2[_ngcontent-%COMP%]{color:#555;margin-bottom:15px;font-size:20px}.filtros-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.filtros[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:end}.filtro-grupo[_ngcontent-%COMP%]{display:flex;flex-direction:column}.filtro-grupo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;color:#555;font-weight:500}.filtro-grupo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.filtro-grupo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.resumen-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.resumen-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a;display:flex;align-items:center;gap:15px;transition:transform .3s}.resumen-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 8px #00000026}.resumen-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:48px}.resumen-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:8px;font-weight:500}.resumen-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0}.resumen-card.gastos[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#dc3545}.resumen-card.depositos[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .resumen-card.balance.positivo[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#28a745}.resumen-card.balance.negativo[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#dc3545}.resumen-card.transacciones[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#007bff}.info-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.info-card[_ngcontent-%COMP%]{background:#f8f9fa;border-left:4px solid #007bff;border-radius:8px;padding:20px}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:15px;font-size:18px}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin-bottom:10px}.info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:20px;color:#666}.info-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.6}.btn-primary[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}@media (max-width: 768px){.filtros[_ngcontent-%COMP%], .resumen-container[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n      });\n    }\n  }\n  return ReportesGlobalesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}